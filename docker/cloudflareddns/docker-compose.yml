version: "3.7"

services:
  cloudflareddns:
    container_name: cloudflareddns
    image: ghcr.io/hotio/cloudflareddns
    environment:
      - PUID=1000
      - PGID=1000
      - UMASK=002
      - TZ=Etc/UTC
      - INTERVAL=300
      - DETECTION_MODE=dig-whoami.cloudflare
      - LOG_LEVEL=3
      - CF_USER=mason@Lmnotran.com
      # The API key is account-wide
      - CF_APIKEY=${CF_APIKEY:?CF_APIKEY must be set}
      # This token is specific to bao.segfault.rip
      - CF_APITOKEN=${CF_APITOKEN:?CF_APITOKEN must be set}
      # This token works from any host
      - CF_APITOKEN_ZONE=${CF_APITOKEN_ZONE:?CF_APITOKEN_ZONE must be set}
      - CF_HOSTS=bao.segfault.rip
      - CF_ZONES=segfault.rip
      - CF_RECORDTYPES=A;
    volumes:
      - config:/config

volumes:
  config: {}